<app-header></app-header>

<section class="gallery-page">
  <div class="gallery-hero">
    <h1>Our Gallery</h1>
    <p>Explore moments from our vibrant school community</p>
  </div>

  <div class="gallery-container">
    <div *ngIf="isLoading" class="loading-state">
      <div class="spinner"></div>
      <p>Loading gallery...</p>
    </div>

    <div *ngIf="!isLoading && images.length === 0" class="empty-state">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
        <path d="M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19ZM8.5 13.5L11 16.51L14.5 12L19 18H5L8.5 13.5Z" fill="currentColor"/>
      </svg>
      <h3>No Images Yet</h3>
      <p>Gallery images will appear here soon.</p>
    </div>

    <div *ngIf="!isLoading && images.length > 0" class="gallery-grid">
      <div *ngFor="let img of images" class="gallery-card" (click)="openLightbox(img)">
        <div class="image-wrapper">
          <img [src]="getImageUrl(img)" [alt]="img.title" loading="lazy" />
          <div class="image-overlay">
            <span class="view-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z" fill="white"/>
              </svg>
            </span>
          </div>
        </div>
        <div class="card-info">
          <h3>{{ img.title }}</h3>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div *ngIf="!isLoading && totalPages > 1" class="pagination">
      <button class="page-btn" [disabled]="currentPage === 1" (click)="prevPage()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M15.41 7.41L14 6L8 12L14 18L15.41 16.59L10.83 12L15.41 7.41Z" fill="currentColor"/>
        </svg>
        Previous
      </button>

      <div class="page-numbers">
        <button *ngFor="let p of getPageNumbers()" 
          class="page-num" 
          [class.active]="p === currentPage"
          (click)="goToPage(p)">{{ p }}</button>
      </div>

      <button class="page-btn" [disabled]="currentPage === totalPages" (click)="nextPage()">
        Next
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M8.59 16.59L10 18L16 12L10 6L8.59 7.41L13.17 12L8.59 16.59Z" fill="currentColor"/>
        </svg>
      </button>
    </div>
  </div>
</section>

<!-- Lightbox -->
<div class="lightbox" *ngIf="selectedImage" (click)="closeLightbox()">
  <div class="lightbox-content" (click)="$event.stopPropagation()">
    <button class="lightbox-close" (click)="closeLightbox()">&times;</button>
    <img [src]="getImageUrl(selectedImage)" [alt]="selectedImage.title" />
    <p class="lightbox-title">{{ selectedImage.title }}</p>
  </div>
</div>

<app-footer></app-footer>
